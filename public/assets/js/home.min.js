const backsound=new Audio("assets/audios/backsound.mp3"),loading=document.querySelector("#loading"),csrf=document.querySelector("meta[name=csrf]").getAttribute("content"),baseUrl=document.querySelector("meta[name=url]").getAttribute("content");function initAOS(){AOS.init({offset:120,duration:750,easing:"ease-in-out",once:!0})}function openInvitation(){const e=document.querySelector(".onboarding"),n=document.querySelector("main");n.classList.remove("d-none"),n.classList.add("openned"),e.classList.add("closed"),initAOS(),playBacksound()}function setCountdown(){const e=new Date("2025-2-15")-new Date,n=Math.floor(e/864e5);document.querySelector(".timer-days .number").textContent=n}function copyToClipboard(e){const n=document.querySelector(e),t=document.createElement("textarea");t.value=n.innerText,document.body.appendChild(t),t.select(),t.setSelectionRange(0,99999),navigator.clipboard.writeText(t.value).then((function(){toastSuccess("Copied!")}),(function(e){console.error(e)})),document.body.removeChild(t)}function toggleBacksound(){backsound.paused?playBacksound():pauseBacksound()}function playBacksound(){backsound.play()}function pauseBacksound(){backsound.pause()}function scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}function toggleGuestCount(e){const n="1"==e.target.value,t=document.querySelector(".guest-count-wrapper"),o=t.querySelector("select[name=num_guest]");n?t.classList.remove("d-none"):(t.classList.add("d-none"),o.selectedIndex=0,document.querySelectorAll(".partner-name-wrapper .input-group").forEach((e=>e.remove())))}function showPartnerInput(e){const n=e.target.value,t=document.querySelector(".partner-name-wrapper");if(t.querySelectorAll(".input-group").forEach((e=>e.remove())),n>=2)for(let e=2;e<=n;e++){const n=document.createElement("div");n.innerHTML=`\n                <div class="input-group mb-3">\n                    <input name="guest${e}name" type="text" class="form-control"\n                        placeholder="Your partner's name" aria-label="Partner's Name" required>\n                </div>\n            `,t.appendChild(n.firstElementChild)}}function fetchRsvps(e=5,n=!1){return;const t=document.querySelector(".comments-wrapper"),o=t.querySelectorAll(".comment-item");let s=e;s=n&&o.length<=e?e:n?o.length:o.length+e,fetch(`${baseUrl}/rsvps/${s}`).then((e=>e.json())).then((({rsvps:e})=>{o.forEach((e=>e.remove())),[...e].forEach((e=>{const n=document.createElement("div");n.innerHTML=`\n                    <div class="comment-item col-12 border-bottom border-danger py-3">\n                        <div class="d-flex align-items-center mb-2 gap-3">\n                            <span class="text-primary text-uppercase fs-16 fw-700 ff-times-new-roman">\n                                ${e.full_name}\n                            </span>\n\n                            <div class="bg-secondary d-flex rounded-pill align-items-center gap-1 px-2 py-1">\n                                <img width="14" height="14"src="${baseUrl}/assets/images/icons/${e.attendance?"check-primary.svg":"times-primary.svg"}">\n                                <span class="fs-14 fs-xs-12 text-primary ff-times-new-roman">\n                                    ${e.attendance?"Will Attend":"Will Not Attend"} \n                                </span>\n                            </div>\n                        </div>\n\n                        <p class="text-primary-dark fs-16 fw-400 ff-times-new-roman mb-2">\n                            ${e.greetings_escaped}\n                        </p>\n\n                        <div class="d-flex gap-2">\n                            <img src="${baseUrl}/assets/images/icons/clock-primary-dark.svg" alt="Clock Icon">\n\n                            <span class="fs-14 fs-xs-12 text-primary-dark ff-times-new-roman">\n                                ${e.create_date_diff}\n                            </span>\n                        </div>\n                    </div>\n                `,t.appendChild(n.firstElementChild)}))})).catch((e=>{console.error(e)}))}function storeRsvp(e){e.preventDefault();const n=e.target,t=new FormData(n),o=n.querySelector("button[type=submit]");validateRsvp(t.get("invitation_id"),(function(){o.setAttribute("disabled",!0),fetch(`${baseUrl}/rsvps`,{method:"POST",headers:{Accept:"application/json","X-CSRF-TOKEN":csrf},body:t}).then((e=>e.json())).then((()=>{n.reset(),document.querySelectorAll(".partner-name-wrapper .input-group").forEach((e=>e.remove())),fetchRsvps(5,!0),toastSuccess("Thank you for your confirmation and blessing!")})).catch((e=>{console.error(e)})).finally((()=>{o.removeAttribute("disabled")}))}))}function validateRsvp(e,n){fetch(`${baseUrl}/rsvps/check/${e}`).then((e=>e.json())).then((({exists:e})=>{e?toastWarning("You already submitted an RSVP."):n()})).catch((e=>{console.error(e)}))}document.addEventListener("DOMContentLoaded",(function(){new Swiper(".swiper-gallery",{spaceBetween:20,slidesPerView:1.2,breakpoints:{1024:{slidesPerView:3}}}),setCountdown(),setInterval((()=>{setCountdown()}),36e5),fetchRsvps()})),window.addEventListener("load",(function(){loading.classList.add("loaded"),setTimeout((()=>{loading.remove()}),500)}));